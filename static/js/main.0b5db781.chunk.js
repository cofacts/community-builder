(this["webpackJsonpcommunity-builder"]=this["webpackJsonpcommunity-builder"]||[]).push([[0],{117:function(e,t,a){e.exports=a(134)},129:function(e,t,a){},134:function(e,t,a){"use strict";a.r(t);var n,r,o,l,i,c,s=a(0),u=a.n(s),m=a(16),f=a.n(m),d=a(192),p=a(191),E=a(15),b=a(33),g=a(108),h=new E.ApolloClient({link:E.ApolloLink.from([new g.a({uri:"".concat("https://cofacts-api.g0v.tw","/graphql"),headers:{"x-app-id":"RUMORS_SITE"}})]),cache:new E.InMemoryCache}),v=a(106),y=a(105),O=a.n(y),k=Object(v.a)({palette:{primary:{main:"#ffb600",50:"#fff890",100:"#fff000",200:"#ffe200",300:"#ffd300",400:"#ffc500",500:"#ffb600",600:"#ffa300",700:"#ff9200",800:"#ff7f00",900:"#ff6d00",light:"#fafafa",dark:"#e8e8e8"},secondary:{main:"#333333",50:"#f5f5f5",100:"#d6d6d6",200:"#adadad",300:"#858585",400:"#5c5c5c",500:"#333333",600:"#2e2e2e",700:"#292929",800:"#242424",900:"#1f1f1f"},error:{main:O.a.A400},background:{default:"#f5f5f5"}},typography:{fontFamily:'"Noto Sans TC", "Helvetica", "Arial", sans-serif'}}),R=(a(129),a(18)),L=a(175),N=a(188),S=a(189),A=a(137),C=a(190),w=a(177),j=a(179),T=a(180),x=a(181),q=Object(L.a)({link:{textDecoration:"none"}}),D=function(e){var t=e.to,a=e.title,n=e.description,r=q();return u.a.createElement(w.a,{item:!0,xs:12,sm:6},u.a.createElement(b.b,{className:r.link,to:t},u.a.createElement(j.a,null,u.a.createElement(T.a,null,u.a.createElement(x.a,null,u.a.createElement(A.a,{variant:"h5",gutterBottom:!0},a),u.a.createElement(A.a,{variant:"body1"},n))))))},I=function(){return u.a.createElement(w.a,{container:!0,spacing:2},u.a.createElement(D,{to:"/stats",title:"Statistics",description:"Real-time statistics from Cofacts API"}),u.a.createElement(D,{to:"/need-to-check/setup",title:"Message to check",description:"View list of messages that needs to be checked by editors"}),u.a.createElement(D,{to:"/editorworks",title:"Thank you editors",description:"List of recent works from editors"}),u.a.createElement(D,{to:"/bignum/setup",title:"Big Numbers",description:"Instant number display to project in meetups"}))},P=a(44);function U(){var e=Object(P.a)(["\n    query ListReplies($before: String, $after: String) {\n  ListReplies(orderBy: [{createdAt: DESC}], before: $before, after: $after, first: 25) {\n    totalCount\n    pageInfo {\n      firstCursor\n      lastCursor\n    }\n    edges {\n      cursor\n      node {\n        id\n        text\n        user {\n          name\n        }\n        createdAt\n      }\n    }\n  }\n}\n    "]);return U=function(){return e},e}function B(){var e=Object(P.a)(["\n    query BigNumOfFeedbacks($startTime: String) {\n  query: ListArticleReplyFeedbacks(filter: {createdAt: {GTE: $startTime}}) {\n    totalCount\n  }\n}\n    "]);return B=function(){return e},e}function $(){var e=Object(P.a)(["\n    query BigNumOfReplied($startTime: String) {\n  query: ListArticles(filter: {repliedAt: {GTE: $startTime}}) {\n    totalCount\n  }\n}\n    "]);return $=function(){return e},e}function M(){var e=Object(P.a)(["\n    query LoadAPIStats {\n  allArticles: ListArticles {\n    totalCount\n  }\n  allRepliedArticles: ListArticles(filter: {replyCount: {GTE: 1}}) {\n    totalCount\n  }\n  articlesHasUsefulReplies: ListArticles(filter: {hasArticleReplyWithMorePositiveFeedback: true}) {\n    totalCount\n  }\n}\n    "]);return M=function(){return e},e}!function(e){e.Url="URL",e.Line="LINE"}(n||(n={})),function(e){e.Rumor="RUMOR",e.NotRumor="NOT_RUMOR",e.NotArticle="NOT_ARTICLE",e.Opinionated="OPINIONATED"}(r||(r={})),function(e){e.Normal="NORMAL",e.Deleted="DELETED"}(o||(o={})),function(e){e.Asc="ASC",e.Desc="DESC"}(l||(l={})),function(e){e.Upvote="UPVOTE",e.Neutral="NEUTRAL",e.Downvote="DOWNVOTE"}(i||(i={})),function(e){e.Normal="NORMAL",e.Deleted="DELETED"}(c||(c={}));var z=Object(E.gql)(M());Object(E.gql)($());Object(E.gql)(B());var F=Object(E.gql)(U());function W(e){return e.toString().replace(/(\d{1,3})(?=(\d{3})+$)/,"$1,")}var G,H=a(182),Q=function(e){var t=e.name,a=e.value;return u.a.createElement(w.a,{item:!0,xs:12,sm:4},u.a.createElement(j.a,null,u.a.createElement(x.a,null,u.a.createElement(A.a,{variant:"body1",gutterBottom:!0},t),u.a.createElement(A.a,{variant:"h5"},a))))},V=function(){var e,t,a,n,r=(n={pollInterval:5e3},E.useQuery(z,n)),o=r.data;return r.loading?u.a.createElement(A.a,{align:"center",component:"div"},u.a.createElement(H.a,{size:64})):u.a.createElement(w.a,{container:!0,spacing:2},u.a.createElement(Q,{name:"All messages",value:W((null===o||void 0===o||null===(e=o.allArticles)||void 0===e?void 0:e.totalCount)||0)}),u.a.createElement(Q,{name:"Replied messages",value:W((null===o||void 0===o||null===(t=o.allRepliedArticles)||void 0===t?void 0:t.totalCount)||0)}),u.a.createElement(Q,{name:"Has useful replies",value:W((null===o||void 0===o||null===(a=o.articlesHasUsefulReplies)||void 0===a?void 0:a.totalCount)||0)}))},_=function(){return u.a.createElement("div",null,"Need-to-check form")};!function(e){e.desc="desc",e.asc="asc"}(G||(G={}));var J=function(){var e=Object(R.g)().search,t=new URLSearchParams(e);t.get("notRepliedCount"),t.get("notRepliedSortBy"),t.get("notRepliedSortOrder"),t.get("noUsefulCount"),t.get("noUsefulSortBy"),t.get("noUsefulSortOrder");return u.a.createElement("div",null,"Need-to-check table")},K=a(77);function X(e){var t=e.pageInfo,a=void 0===t?{}:t,n=e.edges,r=void 0===n?[]:n,o=a.firstCursor,l=a.lastCursor;if(!o||!l)return null;var i=r.length&&r[0]&&r[0].cursor,c=r.length&&r[r.length-1]&&r[r.length-1].cursor;return u.a.createElement("p",null,o&&o!==i&&u.a.createElement(b.b,{to:{pathname:"/editorworks",search:Object(K.stringify)({before:i,after:void 0})}},"Prev"),l&&l!==c&&u.a.createElement(b.b,{to:{pathname:"/editorworks",search:Object(K.stringify)({after:c,before:void 0})}},"Next"))}var Y,Z=function(){var e,t=Object(R.g)().search,a=new URLSearchParams(t),n=a.get("before"),r=a.get("after"),o=(e={variables:{before:n,after:r}},E.useQuery(F,e)),l=o.data,i=o.loading,c=o.error;return i?u.a.createElement("p",null,"Loading..."):c?u.a.createElement("p",null,"Error: ",c):l&&l.ListReplies&&l.ListReplies.edges?u.a.createElement("table",null,u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("th",null,"Text"),u.a.createElement("th",null,"Author"),u.a.createElement("th",null,"Created at"))),u.a.createElement("tbody",null,l.ListReplies.edges.map((function(e){var t,a=e.node;return u.a.createElement("tr",{key:a.id},u.a.createElement("td",null,u.a.createElement("a",{href:"https://cofacts.hacktabl.org/reply/".concat(a.id)},a.text)),u.a.createElement("td",null,null===a||void 0===a||null===(t=a.user)||void 0===t?void 0:t.name),u.a.createElement("td",null,u.a.createElement("a",{href:"https://cofacts.hacktabl.org/reply/".concat(a.id)},a.createdAt)))}))),u.a.createElement("tfoot",null,u.a.createElement("tr",null,u.a.createElement("td",{colSpan:3},u.a.createElement(X,{pageInfo:l.ListReplies.pageInfo,edges:l.ListReplies.edges}))))):u.a.createElement("p",null,"No data")},ee=a(186),te=a(187),ae=a(193),ne=a(183),re=a(184),oe=a(185),le=a(194),ie=a(107),ce=a(78),se={7:{top:"Lucky"},17:{bottom:"8+9"},21:{top:"\u6bcf\u5929\u53ea\u6709",bottom:"\u5c0f\u6642\uff0c\u5269\u4e0b 3 \u5c0f\u6642\u662f\u7528\u4f86\u7761\u89ba\u7684"},30:{bottom:"\u800c\u7acb"},38:{bottom:"\u5a66\u5973\u7bc0"},40:{bottom:"\u4e0d\u60d1"},44:{bottom:"\u96bb\u77f3\u7345\u5b50"},50:{bottom:"\u77e5\u5929\u547d"},56:{bottom:"\u4e0d\u80fd\u4ea1"},60:{top:"\u5728\u975e\u6d32\u6bcf\u904e\u4e86",bottom:"\u79d2\uff0c\u5c31\u6709\u4e00\u5206\u9418\u904e\u53bb"},64:{top:"\u52ff\u5fd8"},70:{bottom:"\u96a8\u5fc3\u6240\u6b32\u800c\u4e0d\u8e30\u77e9"},77:{top:"\u68ee"},87:{bottom:"\u4e0d\u80fd\u518d\u9ad8\u4e86"},92:{top:"\u6c92\u6709\u5171\u8b58\u7684",bottom:"\u5171\u8b58"},94:{bottom:"\u72c2"},101:{bottom:"\u5927\u6a13"},104:{bottom:"\u67e5\u865f\u53f0"},113:{top:"\u885b\u798f\u90e8",bottom:"\u4fdd\u8b77\u5c08\u7dda"},118:{top:"\u770b\u5230",bottom:"\u5c31\u8dea\u4e86"},123:{bottom:"\u6728\u982d\u4eba"},128:{top:"2\u76847\u6b21\u65b9"},144:{top:"12\xd712="},165:{top:"\u8b66\u653f\u7f72",bottom:"\u53cd\u8a50\u9a19\u5c08\u7dda"},183:{bottom:"CLUB"},193:{bottom:"\u7e23\u9053"},200:{top:"\u610f\u5916\u64bf\u5230",bottom:"\u5143"},228:{bottom:"\u4e8c\u4e8c\u516b"},318:{bottom:"\u5b78\u904b"},377:{bottom:"\u68ee\u4e03\u4e03"},500:{top:"\u4e0b\u53bb\u9818"}};function ue(){var e=Object(P.a)(["\n      query BigNumOfFeedbacks($startTime: String) {\n        query: ListArticleReplyFeedbacks(\n          filter: { createdAt: { GTE: $startTime } }\n        ) {\n          totalCount\n        }\n      }\n    "]);return ue=function(){return e},e}function me(){var e=Object(P.a)(["\n      query BigNumOfReplied($startTime: String) {\n        query: ListArticles(filter: { repliedAt: { GTE: $startTime } }) {\n          totalCount\n        }\n      }\n    "]);return me=function(){return e},e}var fe;!function(e){e.replied="replied",e.feedback="feedback"}(fe||(fe={}));var de=(Y={},Object(ce.a)(Y,fe.replied,{top:"\u56de\u8986\u4e86",bottom:"\u5247\u8a0a\u606f",query:Object(E.gql)(me())}),Object(ce.a)(Y,fe.feedback,{top:"\u65b0\u589e\u4e86",bottom:"\u5247\u8a55\u50f9",query:Object(E.gql)(ue())}),Y),pe=Object(L.a)({displays:{position:"fixed",top:0,right:0,bottom:0,left:0,display:"flex",background:"#fff"},resizer:{flex:1,position:"relative"},display:{position:"absolute",width:768,height:768,left:"50%",top:"50%",display:"flex",flexFlow:"column",justifyContent:"space-around",textAlign:"center","& > p":{margin:0}},time:{fontSize:36,fontWeight:200},top:{fontSize:64,fontWeight:600},bottom:{fontSize:44,fontWeight:600},number:{fontSize:360,lineHeight:1,fontWeight:400},funNumber:{fontSize:360,fontWeight:100},funParagraph:{fontSize:84,fontWeight:600},border:{position:"absolute",border:"8px solid rgba(0,0,0,0.64)",top:24,right:24,bottom:24,left:24}}),Ee=function(e){var t,a=e.rootProps,n=e.start,r=e.panelType,o=pe(),l=de[r],i=l.top,c=l.bottom,s=l.query,m=Object(E.useQuery)(s,{pollInterval:5e3,variables:{startTime:n.toISOString()}}),f=m.data,d=m.loading,p=m.error;if(d)return u.a.createElement("div",a,"Loading");if(p)return u.a.createElement("div",a,p.toString());var b=null===(t=f.query)||void 0===t?void 0:t.totalCount,g=null===b?"":b.toString();if(b&&b in se){var h=se[b],v=h.top,y=h.bottom;return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",a,v&&u.a.createElement("p",{className:o.funParagraph},v),u.a.createElement("p",{className:o.funNumber},g),y&&u.a.createElement("p",{className:o.funParagraph},y)),u.a.createElement("div",{className:o.border}))}return u.a.createElement("div",a,u.a.createElement("p",{className:o.time},"\u81ea ",n.toLocaleString()," \u8d77"),u.a.createElement("p",{className:o.top},i),u.a.createElement("p",{className:o.number},g),u.a.createElement("p",{className:o.bottom},c))},be=function(e){var t=e.children,a=pe(),n=Object(s.useState)(1),r=Object(ie.a)(n,2),o=r[0],l=r[1],i=Object(s.useRef)(null);return Object(s.useEffect)((function(){function e(){if(null!==i.current){var e=i.current.getBoundingClientRect(),t=e.width,a=e.height,n=Math.max(t-80,0)/768,r=Math.max(a-80,0)/768;l(Math.min(n,r))}}return window.addEventListener("resize",e),e(),function(){window.removeEventListener("resize",e)}}),[]),u.a.createElement("div",{className:a.resizer,ref:i},t({className:a.display,style:{transform:"translate(-50%, -50%) scale(".concat(o,")")}}))},ge=function(){var e=Object(R.g)().search,t=pe(),a=new URLSearchParams(e),n=a.get("start"),r=a.getAll("panels"),o=n?new Date(n):new Date,l=r.map((function(e){if(!(t=fe,function(e){return Object.values(t).includes(e)})(e))throw new Error("panels must be one of PanelType.");var t;return fe[e]}));return u.a.createElement("div",{className:t.displays},l.map((function(e){return u.a.createElement(be,{key:e},(function(t){return u.a.createElement(Ee,{rootProps:t,panelType:e,start:o})}))})))},he=Object(L.a)((function(e){return{setup:{margin:"".concat(e.spacing(2),"px auto")},panelsetup:{marginTop:e.spacing(4),marginBottom:e.spacing(1)}}})),ve=function(){var e=he(),t=Object(R.f)();return u.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a=new URLSearchParams(new FormData(e.target)).toString();t.push("/bignum?"+a)}},u.a.createElement(j.a,{classes:{root:e.setup}},u.a.createElement(x.a,null,u.a.createElement(A.a,{variant:"h4",gutterBottom:!0},"Display settings"),u.a.createElement(ae.a,{name:"start",label:"Time to start counting",type:"datetime-local",InputLabelProps:{shrink:!0}}),u.a.createElement(ne.a,{component:"legend",classes:{root:e.panelsetup}},"Numbers to show"),u.a.createElement(re.a,null,u.a.createElement(oe.a,{control:u.a.createElement(le.a,{name:"panels",value:fe.replied,defaultChecked:!0}),label:"Replied articles"}),u.a.createElement(oe.a,{control:u.a.createElement(le.a,{name:"panels",value:fe.feedback,defaultChecked:!0}),label:"Feedbacks"}))),u.a.createElement(ee.a,null,u.a.createElement(te.a,{color:"primary",type:"submit"},"Start"))))},ye=Object(L.a)((function(e){return{titleLink:{color:"inherit",textDecoration:"none","&:hover":{textDecoration:"underline"}},gridContainer:{marginTop:e.spacing(2)}}})),Oe=function(){var e=ye();return u.a.createElement(u.a.Fragment,null,u.a.createElement(N.a,{color:"secondary",position:"static"},u.a.createElement(S.a,null,u.a.createElement(b.b,{to:"/",className:e.titleLink},u.a.createElement(A.a,{variant:"h6"},"Cofacts Community Builder")))),u.a.createElement(C.a,{classes:{root:e.gridContainer},maxWidth:"lg"},u.a.createElement(R.c,null,u.a.createElement(R.a,{exact:!0,path:"/"},u.a.createElement(I,null)),u.a.createElement(R.a,{path:"/stats"},u.a.createElement(V,null)),u.a.createElement(R.a,{path:"/need-to-check/setup"},u.a.createElement(_,null)),u.a.createElement(R.a,{path:"/need-to-check"},u.a.createElement(J,null)),u.a.createElement(R.a,{path:"/editorworks"},u.a.createElement(Z,null)),u.a.createElement(R.a,{path:"/bignum/setup"},u.a.createElement(ve,null)),u.a.createElement(R.a,{path:"/bignum"},u.a.createElement(ge,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));f.a.render(u.a.createElement(u.a.StrictMode,null,u.a.createElement(p.a,{theme:k},u.a.createElement(d.a,null),u.a.createElement(E.ApolloProvider,{client:h},u.a.createElement(b.a,null,u.a.createElement(Oe,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[117,1,2]]]);
//# sourceMappingURL=main.0b5db781.chunk.js.map