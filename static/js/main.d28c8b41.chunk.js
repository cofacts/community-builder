(this["webpackJsonpcommunity-builder"]=this["webpackJsonpcommunity-builder"]||[]).push([[0],{189:function(e,t,a){e.exports=a(203)},200:function(e,t,a){},203:function(e,t,a){"use strict";a.r(t);var n,r,l,o,i,c,u,s,d,m,f,p,E,g=a(0),b=a.n(g),v=a(20),y=a.n(v),h=a(265),R=a(256),w=a(14),A=a(33),I=a(163),O=a(3),L=new w.ApolloClient({link:w.ApolloLink.from([new I.a({uri:"".concat("https://api.cofacts.tw","/graphql"),headers:{"x-app-id":"RUMORS_SITE"}})]),cache:new w.InMemoryCache({typePolicies:{Query:{fields:{ListReplies:Object(O.H)(["filter"]),ListReplyRequests:Object(O.H)(["filter"]),ListArticleReplyFeedbacks:Object(O.H)(["filter"])}}}})}),C=a(68),T=a(160),S=a.n(T),k=Object(C.a)({palette:{primary:{main:"#ffb600",50:"#fff890",100:"#fff000",200:"#ffe200",300:"#ffd300",400:"#ffc500",500:"#ffb600",600:"#ffa300",700:"#ff9200",800:"#ff7f00",900:"#ff6d00",light:"#fafafa",dark:"#e8e8e8"},secondary:{main:"#333333",50:"#f5f5f5",100:"#d6d6d6",200:"#adadad",300:"#858585",400:"#5c5c5c",500:"#333333",600:"#2e2e2e",700:"#292929",800:"#242424",900:"#1f1f1f"},error:{main:S.a.A400},background:{default:"#f5f5f5"}},typography:{fontFamily:'"Noto Sans TC", "Helvetica", "Arial", sans-serif'}}),N=(a(200),a(25)),j=a(152),$=a(263),U=a(259),q=a(166),P=a(264),x=a(252),D=a(253),B=a(254),F=a(255),M=Object(j.a)({link:{textDecoration:"none"}}),_=function(e){var t=e.to,a=e.title,n=e.description,r=M();return b.a.createElement(x.a,{item:!0,xs:12,sm:6},b.a.createElement(A.b,{className:r.link,to:t},b.a.createElement(D.a,null,b.a.createElement(B.a,null,b.a.createElement(F.a,null,b.a.createElement(q.a,{variant:"h5",gutterBottom:!0},a),b.a.createElement(q.a,{variant:"body1"},n))))))},z=function(){return b.a.createElement(x.a,{container:!0,spacing:2},b.a.createElement(_,{to:"/stats",title:"Statistics",description:"Real-time statistics from Cofacts API"}),b.a.createElement(_,{to:"/need-to-check/setup",title:"Message to check",description:"View list of messages that needs to be checked by editors"}),b.a.createElement(_,{to:"/editorworks",title:"Thank you editors",description:"List of recent works from editors"}),b.a.createElement(_,{to:"/bignum/setup",title:"Big Numbers",description:"Instant number display to project in meetups"}))},G=a(38);function H(){var e=Object(G.a)(["\n    query ReplyListInReplyTable($after: String, $pageSize: Int, $createdAt: TimeRangeInput, $userId: String) {\n  ListReplies(filter: {createdAt: $createdAt, userId: $userId}, orderBy: [{createdAt: DESC}], after: $after, first: $pageSize) {\n    edges {\n      cursor\n      node {\n        id\n        text\n        user {\n          id\n          name\n        }\n        createdAt\n      }\n    }\n  }\n}\n    "]);return H=function(){return e},e}function Y(){var e=Object(G.a)(["\n    query ReplyListStatInReplyTable($createdAt: TimeRangeInput, $userId: String) {\n  ListReplies(filter: {createdAt: $createdAt, userId: $userId}) {\n    totalCount\n    pageInfo {\n      firstCursor\n      lastCursor\n    }\n  }\n}\n    "]);return Y=function(){return e},e}function V(){var e=Object(G.a)(["\n    query ReplyRequestListInReplyRequestTable($after: String, $pageSize: Int, $createdAt: TimeRangeInput, $userId: String, $statuses: [ReplyRequestStatusEnum!]) {\n  ListReplyRequests(filter: {createdAt: $createdAt, userId: $userId, statuses: $statuses}, orderBy: [{createdAt: DESC}], after: $after, first: $pageSize) {\n    edges {\n      cursor\n      node {\n        id\n        reason\n        updatedAt\n        user {\n          id\n          name\n        }\n        article {\n          id\n          text\n          articleType\n          attachmentUrl(variant: THUMBNAIL)\n        }\n      }\n    }\n  }\n}\n    "]);return V=function(){return e},e}function W(){var e=Object(G.a)(["\n    query ReplyRequestListStatInReplyRequestTable($createdAt: TimeRangeInput, $userId: String, $statuses: [ReplyRequestStatusEnum!]) {\n  ListReplyRequests(filter: {createdAt: $createdAt, userId: $userId, statuses: $statuses}) {\n    totalCount\n    pageInfo {\n      firstCursor\n      lastCursor\n    }\n  }\n}\n    "]);return W=function(){return e},e}function Q(){var e=Object(G.a)(["\n    query FeedbackListInFeedbackTable($after: String, $pageSize: Int, $createdAt: TimeRangeInput, $userId: String, $articleReplyUserId: String, $statuses: [ArticleReplyFeedbackStatusEnum!]) {\n  ListArticleReplyFeedbacks(filter: {createdAt: $createdAt, userId: $userId, articleReplyUserId: $articleReplyUserId, statuses: $statuses}, orderBy: [{createdAt: DESC}], after: $after, first: $pageSize) {\n    edges {\n      cursor\n      node {\n        id\n        comment\n        vote\n        article {\n          id\n          text\n          articleCategories(statuses: [NORMAL]) {\n            category {\n              title\n            }\n            positiveFeedbackCount\n            negativeFeedbackCount\n          }\n          articleType\n          attachmentUrl(variant: THUMBNAIL)\n        }\n        reply {\n          id\n          text\n        }\n        user {\n          id\n          name\n        }\n        createdAt\n      }\n    }\n  }\n}\n    "]);return Q=function(){return e},e}function K(){var e=Object(G.a)(["\n    query FeedbackListStatInFeedbackTable($createdAt: TimeRangeInput, $userId: String, $articleReplyUserId: String, $statuses: [ArticleReplyFeedbackStatusEnum!]) {\n  ListArticleReplyFeedbacks(filter: {createdAt: $createdAt, userId: $userId, articleReplyUserId: $articleReplyUserId, statuses: $statuses}) {\n    totalCount\n    pageInfo {\n      firstCursor\n      lastCursor\n    }\n  }\n}\n    "]);return K=function(){return e},e}function J(){var e=Object(G.a)(['\n    query BigNumOfComments($startTime: String) {\n  query: ListReplyRequests(filter: {createdAt: {GTE: $startTime}, appId: "WEBSITE"}) {\n    totalCount\n  }\n}\n    ']);return J=function(){return e},e}function X(){var e=Object(G.a)(['\n    query BigNumOfFeedbacks($startTime: String) {\n  query: ListArticleReplyFeedbacks(filter: {createdAt: {GTE: $startTime}, appId: "WEBSITE"}) {\n    totalCount\n  }\n}\n    ']);return X=function(){return e},e}function Z(){var e=Object(G.a)(["\n    query BigNumOfReplied($startTime: String) {\n  query: ListArticles(filter: {repliedAt: {GTE: $startTime}}) {\n    totalCount\n  }\n}\n    "]);return Z=function(){return e},e}function ee(){var e=Object(G.a)(["\n    query LoadAPIStats {\n  allArticles: ListArticles {\n    totalCount\n  }\n  allRepliedArticles: ListArticles(filter: {replyCount: {GTE: 1}}) {\n    totalCount\n  }\n  articlesHasUsefulReplies: ListArticles(filter: {hasArticleReplyWithMorePositiveFeedback: true}) {\n    totalCount\n  }\n}\n    "]);return ee=function(){return e},e}!function(e){e.Url="URL",e.Line="LINE"}(n||(n={})),function(e){e.OpenPeeps="OpenPeeps",e.Gravatar="Gravatar",e.Facebook="Facebook",e.Github="Github"}(r||(r={})),function(e){e.Rumor="RUMOR",e.NotRumor="NOT_RUMOR",e.NotArticle="NOT_ARTICLE",e.Opinionated="OPINIONATED"}(l||(l={})),function(e){e.Normal="NORMAL",e.Deleted="DELETED",e.Blocked="BLOCKED"}(o||(o={})),function(e){e.Asc="ASC",e.Desc="DESC"}(i||(i={})),function(e){e.Normal="NORMAL",e.Blocked="BLOCKED"}(c||(c={})),function(e){e.Upvote="UPVOTE",e.Neutral="NEUTRAL",e.Downvote="DOWNVOTE"}(u||(u={})),function(e){e.Normal="NORMAL",e.Deleted="DELETED",e.Blocked="BLOCKED"}(s||(s={})),function(e){e.Normal="NORMAL",e.Blocked="BLOCKED"}(d||(d={})),function(e){e.Article="ARTICLE",e.Reply="REPLY"}(m||(m={})),function(e){e.Text="TEXT",e.Image="IMAGE",e.Video="VIDEO",e.Audio="AUDIO"}(f||(f={})),function(e){e.Original="ORIGINAL",e.Preview="PREVIEW",e.Thumbnail="THUMBNAIL"}(p||(p={})),function(e){e.Empty="EMPTY",e.NotTrimmed="NOT_TRIMMED",e.HasUriComponent="HAS_URI_COMPONENT",e.Taken="TAKEN"}(E||(E={}));var te=Object(w.gql)(ee());Object(w.gql)(Z());Object(w.gql)(X());Object(w.gql)(J());var ae=Object(w.gql)(K());var ne=Object(w.gql)(Q());var re=Object(w.gql)(W());var le=Object(w.gql)(V());var oe=Object(w.gql)(Y());var ie=Object(w.gql)(H());function ce(e){return e.toString().replace(/(\d{1,3})(?=(\d{3})+$)/,"$1,")}var ue,se=a(208),de=function(e){var t=e.name,a=e.value;return b.a.createElement(x.a,{item:!0,xs:12,sm:4},b.a.createElement(D.a,null,b.a.createElement(F.a,null,b.a.createElement(q.a,{variant:"body1",gutterBottom:!0},t),b.a.createElement(q.a,{variant:"h5"},a))))},me=function(){var e,t,a,n,r=(n={pollInterval:5e3},w.useQuery(te,n)),l=r.data;return r.loading?b.a.createElement(q.a,{align:"center",component:"div"},b.a.createElement(se.a,{size:64})):b.a.createElement(x.a,{container:!0,spacing:2},b.a.createElement(de,{name:"All messages",value:ce((null===l||void 0===l||null===(e=l.allArticles)||void 0===e?void 0:e.totalCount)||0)}),b.a.createElement(de,{name:"Replied messages",value:ce((null===l||void 0===l||null===(t=l.allRepliedArticles)||void 0===t?void 0:t.totalCount)||0)}),b.a.createElement(de,{name:"Has useful replies",value:ce((null===l||void 0===l||null===(a=l.articlesHasUsefulReplies)||void 0===a?void 0:a.totalCount)||0)}))},fe=function(){return b.a.createElement("div",null,"Need-to-check form")};!function(e){e.desc="desc",e.asc="asc"}(ue||(ue={}));var pe,Ee=function(){var e=Object(N.g)().search,t=new URLSearchParams(e);t.get("notRepliedCount"),t.get("notRepliedSortBy"),t.get("notRepliedSortOrder"),t.get("noUsefulCount"),t.get("noUsefulSortBy"),t.get("noUsefulSortOrder");return b.a.createElement("div",null,"Need-to-check table")},ge=a(59),be=a(11),ve=a(111),ye=a(130),he=a(55),Re=a(156),we=a(260),Ae=a(164),Ie=a(161),Oe=function(e){var t=e.currentlyLoadedRows,a=e.onNewPageRequest,n=e.loading,r=Object(Ae.a)(e,["currentlyLoadedRows","onNewPageRequest","loading"]),l=Object(g.useState)(0),o=Object(be.a)(l,2),i=o[0],c=o[1],u=Object(g.useState)((function(){return Math.floor(t.length/50)-1})),s=Object(be.a)(u,2),d=s[0],m=s[1];return b.a.createElement(Ie.a,Object.assign({},r,{rows:t.slice(50*i),pagination:!0,disableSelectionOnClick:!0,page:i,pageSize:50,paginationMode:"server",rowsPerPageOptions:[50],onPageChange:function(e){c(e),e<=d||(a(e),m(e))},loading:n,hideFooterPagination:n}))};function Le(e){return new URLSearchParams(Object(ge.a)(Object(ge.a)(Object(ge.a)({type:e.workType.toString(),day:e.day.toString()},e.userId?{userId:e.userId}:{}),e.articleReplyUserId?{articleReplyUserId:e.articleReplyUserId}:{}),e.showAll?{showAll:"1"}:{}))}!function(e){e[e.REPLY=0]="REPLY",e[e.ARTICLE_REPLY_FEEDBACK=1]="ARTICLE_REPLY_FEEDBACK",e[e.REPLY_REQUEST=2]="REPLY_REQUEST"}(pe||(pe={}));var Ce=Object(Re.a)("div")({width:"100%",overflow:"hidden",display:"-webkit-box",whiteSpace:"normal",lineHeight:1.2,"-webkit-box-orient":"vertical","-webkit-line-clamp":3}),Te=[{field:"author",headerName:"Author",width:120,renderCell:function(e){var t=e.getValue(e.id,"user");return t?b.a.createElement(A.b,{to:"?".concat(Le({workType:pe.REPLY,day:7,userId:t.id,showAll:!0}))},t.name):b.a.createElement("div",null)}},{field:"text",headerName:"Text",width:480,renderCell:function(e){var t=e.getValue(e.id,"text"),a=e.getValue(e.id,"id");return a&&t?b.a.createElement(Ce,null,b.a.createElement(we.a,{href:"".concat("https://cofacts.tw","/reply/").concat(a),color:"textPrimary",variant:"body2"},t)):b.a.createElement("div",null)}},{field:"createdAt",headerName:"Created At",width:200,valueGetter:function(e){var t=e.value;return t?new Date(t).toLocaleString():""}}],Se=function(e){var t,a,n,r=e.startDate,l=e.endDate,o=e.userId,i={GTE:r,LTE:l},c=(n={variables:{createdAt:i,userId:o}},w.useQuery(oe,n)),u=c.data,s=c.loading,d=c.error,m=function(e){return w.useQuery(ie,e)}({notifyOnNetworkStatusChange:!0,variables:{pageSize:50,createdAt:i,userId:o}}),f=m.data,p=m.loading,E=m.error,g=m.fetchMore;if(E)return b.a.createElement("p",null,"Error: ",E);if(d)return b.a.createElement("p",null,"Error: ",d);var v=(null===f||void 0===f||null===(t=f.ListReplies)||void 0===t?void 0:t.edges)||[];return b.a.createElement(Oe,{currentlyLoadedRows:v.map((function(e){return e.node})),columns:Te,rowHeight:64,rowCount:(null===u||void 0===u||null===(a=u.ListReplies)||void 0===a?void 0:a.totalCount)||0,onNewPageRequest:function(){return g({variables:{after:v[v.length-1].cursor}})},loading:p||s})},ke=a(267);function Ne(e){return!!e&&"number"===typeof e.positiveFeedbackCount&&"number"===typeof e.negativeFeedbackCount&&e.positiveFeedbackCount>=e.negativeFeedbackCount}var je,$e=Object(Re.a)("div")({width:"100%",overflow:"hidden",display:"-webkit-box",whiteSpace:"normal",lineHeight:1.2,"-webkit-box-orient":"vertical","-webkit-line-clamp":3}),Ue=[{field:"author",headerName:"Author",width:160,renderCell:function(e){var t=e.getValue(e.id,"user");return t?b.a.createElement(A.b,{to:"?".concat(Le({workType:pe.ARTICLE_REPLY_FEEDBACK,day:7,userId:t.id,showAll:!0}))},t.name):b.a.createElement("div",null)}},{field:"vote",headerName:"Vote",width:48,valueGetter:function(e){switch(e.value){case u.Upvote:return"\ud83d\udc4d";case u.Downvote:return"\ud83d\udc4e";default:return"--"}}},{field:"comment",headerName:"Comment",width:300,renderCell:function(e){var t=e.value;return b.a.createElement($e,null,t)}},{field:"target",headerName:"Article & Reply",width:300,renderCell:function(e){var t=e.getValue(e.id,"article"),a=e.getValue(e.id,"reply"),n=a&&b.a.createElement(we.a,{href:"".concat("https://cofacts.tw","/reply/").concat(a.id),color:"textPrimary",variant:"body2"},b.a.createElement(q.a,{variant:"body2",title:a.text||""},a.text||""));if(!t)return"";switch(t.articleType){case"IMAGE":return t.attachmentUrl?b.a.createElement("div",{style:{display:"flex",gap:"8px",alignItems:"center"}},b.a.createElement(we.a,{href:"".concat("https://cofacts.tw","/article/").concat(t.id)},b.a.createElement("img",{style:{height:64,verticalAlign:"bottom"},src:t.attachmentUrl,alt:t.id})),n):"";default:return b.a.createElement("div",null,b.a.createElement(we.a,{href:"".concat("https://cofacts.tw","/article/").concat(t.id),color:"textPrimary",variant:"body2"},b.a.createElement(q.a,{variant:"body2",title:t.text||""},t.text||"")),n)}}},{field:"createdAt",headerName:"Created At",width:175,valueGetter:function(e){var t=e.value;return t?new Date(t).toLocaleString():""}},{field:"categories",headerName:"Article category",width:240,renderCell:function(e){var t=e.getValue(e.id,"article"),a=((null===t||void 0===t?void 0:t.articleCategories)||[]).filter(Ne);return 0===a.length?"":b.a.createElement($e,null,a.map((function(e,t){var a=e.category;return b.a.createElement(ke.a,{size:"small",key:t,label:a.title,style:{margin:" 0 1px 1px 0"}})})))}}],qe=[c.Normal],Pe=[c.Normal,c.Blocked],xe=function(e){var t,a,n,r=e.startDate,l=e.endDate,o=e.userId,i=e.articleReplyUserId,c={GTE:r,LTE:l},u=e.showAll?Pe:qe,s=(n={variables:{createdAt:c,userId:o,articleReplyUserId:i,statuses:u}},w.useQuery(ae,n)),d=s.data,m=s.loading,f=s.error,p=function(e){return w.useQuery(ne,e)}({notifyOnNetworkStatusChange:!0,variables:{pageSize:50,createdAt:c,userId:o,articleReplyUserId:i,statuses:u}}),E=p.data,g=p.loading,v=p.error,y=p.fetchMore;if(v)return b.a.createElement("p",null,"Error: ",v);if(f)return b.a.createElement("p",null,"Error: ",f);var h=(null===E||void 0===E||null===(t=E.ListArticleReplyFeedbacks)||void 0===t?void 0:t.edges)||[];return b.a.createElement(Oe,{currentlyLoadedRows:h.map((function(e){return e.node})),columns:Ue,rowHeight:64,rowCount:(null===d||void 0===d||null===(a=d.ListArticleReplyFeedbacks)||void 0===a?void 0:a.totalCount)||0,onNewPageRequest:function(){return y({variables:{after:h[h.length-1].cursor}})},loading:g||m})},De=Object(Re.a)("div")({width:"100%",overflow:"hidden",display:"-webkit-box",whiteSpace:"normal",lineHeight:1.2,"-webkit-box-orient":"vertical","-webkit-line-clamp":3}),Be=[{field:"author",headerName:"Author",width:160,renderCell:function(e){var t=e.getValue(e.id,"user");return t?b.a.createElement(A.b,{to:"?".concat(Le({workType:pe.REPLY_REQUEST,day:7,userId:t.id,showAll:!0}))},t.name):b.a.createElement("div",null)}},{field:"reason",headerName:"Reason",width:300,renderCell:function(e){var t=e.value;return b.a.createElement(De,null,t)}},{field:"article",headerName:"Article",width:300,renderCell:function(e){var t=e.value;return b.a.createElement(De,null,b.a.createElement(we.a,{href:"".concat("https://cofacts.tw","/article/").concat(t.id),color:"textPrimary",variant:"body2"},function(){switch(t.articleType){case"IMAGE":return t.attachmentUrl?b.a.createElement("img",{style:{height:64,verticalAlign:"bottom"},src:t.attachmentUrl,alt:t.id}):"Image";default:return b.a.createElement(q.a,{variant:"body2",title:t.text||""},t.text||"")}}()))}},{field:"updatedAt",headerName:"Updated At",width:200,valueGetter:function(e){var t=e.value;return t?new Date(t).toLocaleString():""}}],Fe=[d.Normal],Me=[d.Normal,d.Blocked],_e=function(e){var t,a,n,r=e.startDate,l=e.endDate,o=e.userId,i={GTE:r,LTE:l},c=e.showAll?Me:Fe,u=(n={variables:{createdAt:i,userId:o,statuses:c}},w.useQuery(re,n)),s=u.data,d=u.loading,m=u.error,f=function(e){return w.useQuery(le,e)}({notifyOnNetworkStatusChange:!0,variables:{pageSize:50,createdAt:i,userId:o,statuses:c}}),p=f.data,E=f.loading,g=f.error,v=f.fetchMore;if(g)return b.a.createElement("p",null,"Error: ",g);if(m)return b.a.createElement("p",null,"Error: ",m);var y=(null===p||void 0===p||null===(t=p.ListReplyRequests)||void 0===t?void 0:t.edges)||[];return b.a.createElement(Oe,{currentlyLoadedRows:y.map((function(e){return e.node})),columns:Be,rowHeight:64,rowCount:(null===s||void 0===s||null===(a=s.ListReplyRequests)||void 0===a?void 0:a.totalCount)||0,onNewPageRequest:function(){return v({variables:{after:y[y.length-1].cursor}})},loading:E||d})},ze=Object(j.a)((function(e){return{controls:{marginBottom:e.spacing(2)},controlContent:{display:"flex",alignItems:"center",gap:"8px"}}})),Ge=function(){var e=ze(),t=function(){var e,t,a=Object(N.g)(),n=a.search,r=a.pathname,l=Object(N.f)().push,o=new URLSearchParams(n);return[{workType:+(null!==(e=o.get("type"))&&void 0!==e?e:pe.REPLY),day:+(null!==(t=o.get("day"))&&void 0!==t?t:7),userId:o.get("userId")||void 0,articleReplyUserId:o.get("articleReplyUserId")||void 0,showAll:!!o.get("showAll")},function(e){l("".concat(r,"?").concat(Le(e)))}]}(),a=Object(be.a)(t,2),n=a[0],r=a[1];return b.a.createElement(b.a.Fragment,null,b.a.createElement(D.a,{classes:{root:e.controls}},b.a.createElement(F.a,{classes:{root:e.controlContent}},b.a.createElement(ye.a,{select:!0,value:n.workType,onChange:function(e){return r(Object(ge.a)(Object(ge.a)({},n),{},{workType:+e.target.value}))}},b.a.createElement(he.a,{value:pe.REPLY},"Replies"),b.a.createElement(he.a,{value:pe.ARTICLE_REPLY_FEEDBACK},"Feedbacks"),b.a.createElement(he.a,{value:pe.REPLY_REQUEST},"Comments"))," ","in the last"," ",b.a.createElement("input",{type:"number",defaultValue:n.day,key:n.day,onBlur:function(e){return r(Object(ge.a)(Object(ge.a)({},n),{},{day:+e.target.value}))}})," ","days",n.userId&&b.a.createElement("span",null,"for user"," ",b.a.createElement("a",{href:"".concat("https://cofacts.tw","/user?id=").concat(n.userId)},n.userId)),n.articleReplyUserId&&n.workType===pe.ARTICLE_REPLY_FEEDBACK&&b.a.createElement("span",null,"for article reply user"," ",b.a.createElement("a",{href:"".concat("https://cofacts.tw","/user?id=").concat(n.articleReplyUserId)},n.articleReplyUserId)))),b.a.createElement(ve.a,{style:{height:700}},n.workType===pe.REPLY?b.a.createElement(Se,{startDate:"now-".concat(n.day,"d"),userId:n.userId}):n.workType===pe.ARTICLE_REPLY_FEEDBACK?b.a.createElement(xe,{startDate:"now-".concat(n.day,"d"),userId:n.userId,articleReplyUserId:n.articleReplyUserId,showAll:n.showAll}):n.workType===pe.REPLY_REQUEST?b.a.createElement(_e,{startDate:"now-".concat(n.day,"d"),userId:n.userId,showAll:n.showAll}):null))},He=a(262),Ye=a(73),Ve=a(209),We=a(261),Qe=a(213),Ke=a(169),Je=a(8),Xe={7:{top:"Lucky"},17:{bottom:"8+9"},21:{top:"\u6bcf\u5929\u53ea\u6709",bottom:"\u5c0f\u6642\uff0c\u5269\u4e0b 3 \u5c0f\u6642\u662f\u7528\u4f86\u7761\u89ba\u7684"},30:{bottom:"\u800c\u7acb"},38:{bottom:"\u5a66\u5973\u7bc0"},40:{bottom:"\u4e0d\u60d1"},44:{bottom:"\u96bb\u77f3\u7345\u5b50"},50:{bottom:"\u77e5\u5929\u547d"},56:{bottom:"\u4e0d\u80fd\u4ea1"},60:{top:"\u5728\u975e\u6d32\u6bcf\u904e\u4e86",bottom:"\u79d2\uff0c\u5c31\u6709\u4e00\u5206\u9418\u904e\u53bb"},64:{top:"\u52ff\u5fd8"},70:{bottom:"\u96a8\u5fc3\u6240\u6b32\u800c\u4e0d\u8e30\u77e9"},77:{top:"\u68ee"},87:{bottom:"\u4e0d\u80fd\u518d\u9ad8\u4e86"},92:{top:"\u6c92\u6709\u5171\u8b58\u7684",bottom:"\u5171\u8b58"},94:{bottom:"\u72c2"},101:{bottom:"\u5927\u6a13"},104:{bottom:"\u67e5\u865f\u53f0"},113:{top:"\u885b\u798f\u90e8",bottom:"\u4fdd\u8b77\u5c08\u7dda"},118:{top:"\u770b\u5230",bottom:"\u5c31\u8dea\u4e86"},123:{bottom:"\u6728\u982d\u4eba"},128:{top:"2\u76847\u6b21\u65b9"},144:{top:"12\xd712="},165:{top:"\u8b66\u653f\u7f72",bottom:"\u53cd\u8a50\u9a19\u5c08\u7dda"},183:{bottom:"CLUB"},193:{bottom:"\u7e23\u9053"},200:{top:"\u610f\u5916\u64bf\u5230",bottom:"\u5143"},228:{bottom:"\u4e8c\u4e8c\u516b"},318:{bottom:"\u5b78\u904b"},377:{bottom:"\u68ee\u4e03\u4e03"},500:{top:"\u4e0b\u53bb\u9818"}};function Ze(){var e=Object(G.a)(['\n      query BigNumOfComments($startTime: String) {\n        query: ListReplyRequests(\n          filter: { createdAt: { GTE: $startTime }, appId: "WEBSITE" }\n        ) {\n          totalCount\n        }\n      }\n    ']);return Ze=function(){return e},e}function et(){var e=Object(G.a)(['\n      query BigNumOfFeedbacks($startTime: String) {\n        query: ListArticleReplyFeedbacks(\n          filter: { createdAt: { GTE: $startTime }, appId: "WEBSITE" }\n        ) {\n          totalCount\n        }\n      }\n    ']);return et=function(){return e},e}function tt(){var e=Object(G.a)(["\n      query BigNumOfReplied($startTime: String) {\n        query: ListArticles(filter: { repliedAt: { GTE: $startTime } }) {\n          totalCount\n        }\n      }\n    "]);return tt=function(){return e},e}var at;!function(e){e.replied="replied",e.feedback="feedback",e.comment="comment"}(at||(at={}));var nt=(je={},Object(Je.a)(je,at.replied,{top:"\u56de\u8986\u4e86",bottom:"\u5247\u8a0a\u606f",query:Object(w.gql)(tt())}),Object(Je.a)(je,at.feedback,{top:"\u65b0\u589e\u4e86",bottom:"\u5247\u8a55\u50f9",query:Object(w.gql)(et())}),Object(Je.a)(je,at.comment,{top:"\u65b0\u589e\u4e86",bottom:"\u5247\u88dc\u5145",query:Object(w.gql)(Ze())}),je),rt=Object(j.a)({displays:{position:"fixed",top:0,right:0,bottom:0,left:0,display:"flex",background:"#fff"},resizer:{flex:1,position:"relative"},display:{position:"absolute",width:768,height:768,left:"50%",top:"50%",display:"flex",flexFlow:"column",justifyContent:"space-around",textAlign:"center","& > p":{margin:0}},time:{fontSize:36,fontWeight:200},top:{fontSize:64,fontWeight:600},bottom:{fontSize:44,fontWeight:600},number:{fontSize:360,lineHeight:1,fontWeight:400},funNumber:{fontSize:360,fontWeight:100},funParagraph:{fontSize:84,fontWeight:600},border:{position:"absolute",border:"8px solid rgba(0,0,0,0.64)",top:24,right:24,bottom:24,left:24}}),lt=function(e){var t,a=e.rootProps,n=e.start,r=e.panelType,l=rt(),o=nt[r],i=o.top,c=o.bottom,u=o.query,s=Object(w.useQuery)(u,{pollInterval:5e3,variables:{startTime:n.toISOString()}}),d=s.data,m=s.loading,f=s.error;if(m)return b.a.createElement("div",a,"Loading");if(f)return b.a.createElement("div",a,f.toString());var p=null===(t=d.query)||void 0===t?void 0:t.totalCount,E=null===p?"":p.toString();if(p&&p in Xe){var g=Xe[p],v=g.top,y=g.bottom;return b.a.createElement(b.a.Fragment,null,b.a.createElement("div",a,v&&b.a.createElement("p",{className:l.funParagraph},v),b.a.createElement("p",{className:l.funNumber},E),y&&b.a.createElement("p",{className:l.funParagraph},y)),b.a.createElement("div",{className:l.border}))}return b.a.createElement("div",a,b.a.createElement("p",{className:l.time},"\u81ea ",n.toLocaleString()," \u8d77"),b.a.createElement("p",{className:l.top},i),b.a.createElement("p",{className:l.number},E),b.a.createElement("p",{className:l.bottom},c))},ot=function(e){var t=e.children,a=rt(),n=Object(g.useState)(1),r=Object(be.a)(n,2),l=r[0],o=r[1],i=Object(g.useRef)(null);return Object(g.useEffect)((function(){function e(){if(null!==i.current){var e=i.current.getBoundingClientRect(),t=e.width,a=e.height,n=Math.max(t-8,0)/768,r=Math.max(a-8,0)/768;o(Math.min(n,r))}}return window.addEventListener("resize",e),e(),function(){window.removeEventListener("resize",e)}}),[]),b.a.createElement("div",{className:a.resizer,ref:i},t({className:a.display,style:{transform:"translate(-50%, -50%) scale(".concat(l,")")}}))},it=function(){var e=Object(N.g)().search,t=rt(),a=new URLSearchParams(e),n=a.get("start"),r=a.getAll("panels"),l=n?new Date(n):new Date,o=r.map((function(e){if(!(t=at,function(e){return Object.values(t).includes(e)})(e))throw new Error("panels must be one of PanelType.");var t;return at[e]}));return b.a.createElement("div",{className:t.displays},o.map((function(e){return b.a.createElement(ot,{key:e},(function(t){return b.a.createElement(lt,{rootProps:t,panelType:e,start:l})}))})))},ct=Object(j.a)((function(e){return{setup:{margin:"".concat(e.spacing(2),"px auto")},panelsetup:{marginTop:e.spacing(4),marginBottom:e.spacing(1)}}})),ut=function(){var e=ct(),t=Object(N.f)();return b.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a=new URLSearchParams(new FormData(e.target)).toString();t.push("/bignum?"+a)}},b.a.createElement(D.a,{classes:{root:e.setup}},b.a.createElement(F.a,null,b.a.createElement(q.a,{variant:"h4",gutterBottom:!0},"Display settings"),b.a.createElement(ye.a,{name:"start",label:"Time to start counting",type:"datetime-local",InputLabelProps:{shrink:!0}}),b.a.createElement(Ve.a,{component:"legend",classes:{root:e.panelsetup}},"Numbers to show"),b.a.createElement(We.a,null,b.a.createElement(Qe.a,{control:b.a.createElement(Ke.a,{name:"panels",value:at.feedback,defaultChecked:!0}),label:"Feedbacks"}),b.a.createElement(Qe.a,{control:b.a.createElement(Ke.a,{name:"panels",value:at.comment,defaultChecked:!0}),label:"Comments"}),b.a.createElement(Qe.a,{control:b.a.createElement(Ke.a,{name:"panels",value:at.replied,defaultChecked:!0}),label:"Replied articles"}))),b.a.createElement(He.a,null,b.a.createElement(Ye.a,{color:"primary",type:"submit"},"Start"))))},st=Object(j.a)((function(e){return{titleLink:{color:"inherit",textDecoration:"none","&:hover":{textDecoration:"underline"}},gridContainer:{marginTop:e.spacing(2)}}})),dt=function(){var e=st();return b.a.createElement(b.a.Fragment,null,b.a.createElement($.a,{color:"secondary",position:"static"},b.a.createElement(U.a,null,b.a.createElement(A.b,{to:"/",className:e.titleLink},b.a.createElement(q.a,{variant:"h6"},"Cofacts Community Builder")))),b.a.createElement(P.a,{classes:{root:e.gridContainer},maxWidth:"lg"},b.a.createElement(N.c,null,b.a.createElement(N.a,{exact:!0,path:"/"},b.a.createElement(z,null)),b.a.createElement(N.a,{path:"/stats"},b.a.createElement(me,null)),b.a.createElement(N.a,{path:"/need-to-check/setup"},b.a.createElement(fe,null)),b.a.createElement(N.a,{path:"/need-to-check"},b.a.createElement(Ee,null)),b.a.createElement(N.a,{path:"/editorworks"},b.a.createElement(Ge,null)),b.a.createElement(N.a,{path:"/bignum/setup"},b.a.createElement(ut,null)),b.a.createElement(N.a,{path:"/bignum"},b.a.createElement(it,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));y.a.render(b.a.createElement(b.a.StrictMode,null,b.a.createElement(R.a,{theme:k},b.a.createElement(h.a,null),b.a.createElement(w.ApolloProvider,{client:L},b.a.createElement(A.a,null,b.a.createElement(dt,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[189,1,2]]]);
//# sourceMappingURL=main.d28c8b41.chunk.js.map